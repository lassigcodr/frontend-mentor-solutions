{"mappings":"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","sources":["src/js/controller.js"],"sourcesContent":["const form = document.querySelector('.form');\r\nconst input = document.querySelector('.form__field');\r\nconst list = document.querySelector('.list');\r\n\r\nconst items = []\r\n\r\n// Save items to local storage\r\nconst saveToLocalStorage = () => {\r\n    localStorage.setItem('todoItems', JSON.stringify(items));\r\n};\r\n\r\n// Load items from local storage\r\nconst loadFromLocalStorage = () => {\r\n    const storedItems = localStorage.getItem('todoItems');\r\n    return storedItems ? JSON.parse(storedItems) : [];\r\n};\r\n\r\n\r\nconst count = function() {\r\n    return items.filter(e => {\r\n        if(!e.isDone) {\r\n            return e;\r\n        }\r\n    }).length;\r\n}\r\n\r\nconst render = function(arr) {\r\n    let res = count();\r\n    let markup = `\r\n    ${arr.map((item, i) => {\r\n        return `\r\n        <li class=\"list__item ${item.isDone? 'list__item--completed' : ''}\" draggable=\"true\">\r\n            <label for=\"check-id-${i}\" class=\"checkbox\">\r\n                <input type=\"checkbox\" id=\"check-id-${i}\" ${item.isDone? 'checked' : ''}>\r\n                <span class=\"check\"></span>\r\n            </label>\r\n            <span>${item.task}</span>\r\n            <button class=\"btn btn--close\"></button>\r\n        </li>\r\n        `;\r\n    }).join('')}\r\n\r\n    <li class=\"list__footer\">\r\n        <span id=\"item-left\">${res} item${res>1?'s':''} left</span>\r\n        <ul>\r\n            <li onclick=\"showAll()\">All</li>\r\n            <li onclick=\"filterActive()\">Active</li>\r\n            <li onclick=\"filterCompleted()\">Completed</li>\r\n        </ul>\r\n        <span onclick=\"clearCompleted()\">Clear completed</span>\r\n    </li>\r\n    `;\r\n    list.innerHTML = '';\r\n    if(arr.length === 0) markup = '';\r\n    list.insertAdjacentHTML('afterbegin', markup);\r\n\r\n    const checkbox = document.querySelectorAll('[id^=check-id]');\r\n    checkbox.forEach(check => {\r\n        check.addEventListener('change', () => {\r\n            if(check.checked === true){\r\n                arr[+check.id.slice(-1)].isDone = true;\r\n                check.closest('.list__item').classList.toggle('list__item--completed');\r\n                res -= 1;\r\n                document.querySelector('#item-left').innerHTML = `${res} item${res>1?'s':''} left`;     \r\n            } else {\r\n                arr[+check.id.slice(-1)].isDone = false;\r\n                check.closest('.list__item').classList.toggle('list__item--completed');\r\n                res += 1;\r\n                document.querySelector('#item-left').innerHTML = `${res} item${res>1?'s':''} left`;\r\n            }\r\n\r\n            saveToLocalStorage();\r\n        })\r\n    })\r\n\r\n    // Select all items with the class `.list__item` for drag-and-drop\r\n    const items = [...list.querySelectorAll('.list__item')];\r\n    const footerItem = list.querySelector('.list__footer');\r\n\r\n    items.forEach(item => {\r\n        item.setAttribute(\"draggable\", true); // Make items draggable\r\n        item.addEventListener(\"dragstart\", () => {\r\n            setTimeout(() => item.classList.add(\"dragging\"), 0);\r\n        });\r\n        item.addEventListener(\"dragend\", () => item.classList.remove(\"dragging\"));\r\n    });\r\n\r\n    const sortList = (e) => {\r\n        e.preventDefault();\r\n        const draggingItem = document.querySelector('.dragging');\r\n\r\n        // Select all `.list__item` siblings except the dragging item\r\n        const siblings = [...list.querySelectorAll(\".list__item:not(.dragging)\")];\r\n        \r\n        // Find the correct position to insert the dragging item\r\n        const nextSibling = siblings.find(sibling => {\r\n            return e.clientY < sibling.getBoundingClientRect().top + sibling.offsetHeight / 2;\r\n        });\r\n\r\n        // Stop if attempting to place the dragging item before or after the footer item\r\n        if (!nextSibling || nextSibling === footerItem) return;\r\n\r\n        // Insert the dragging item before the found sibling or at the end of `.list__item` elements\r\n        list.insertBefore(draggingItem, nextSibling);\r\n    };\r\n\r\n    // Attach drag event listeners to the list container\r\n    list.addEventListener(\"dragover\", sortList);\r\n    list.addEventListener(\"dragenter\", e => e.preventDefault());\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    // Load items from local storage on page load\r\n    const storedItems = loadFromLocalStorage();\r\n    items.push(...storedItems);  // Populate items array with stored data\r\n    render(items);\r\n});\r\n\r\nform.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!input.value) return;\r\n    const todo = {\r\n        task: input.value,\r\n        isDone: false\r\n    }\r\n\r\n    items.push(todo);\r\n    input.value = '';\r\n\r\n    saveToLocalStorage();\r\n    render(items);\r\n})\r\n\r\nlist.addEventListener('click', (e) => {\r\n    if(e.target.className === \"btn btn--close\") {\r\n        const parent = e.target.closest('.list__item');\r\n        const check = parent.querySelector('[id^=check-id]');\r\n        items.splice(+check.id.slice(-1), 1);\r\n\r\n        saveToLocalStorage();\r\n        render(items);\r\n    }\r\n})\r\n\r\nconst filterCompleted = function(arr) {\r\n    arr=items;\r\n    const res = arr.filter(e => {\r\n        if(e.isDone) {\r\n            return e;\r\n        }\r\n    })\r\n    if(res.length===0) return\r\n    render(res);\r\n}\r\n\r\nconst filterActive = function(arr) {\r\n    arr=items;\r\n    const res = arr.filter(e => {\r\n        if(!e.isDone) {\r\n            return e;\r\n        }\r\n    })\r\n    if(res.length===0) return\r\n    render(res);\r\n}\r\n\r\nconst showAll = function(arr) {\r\n    arr=items;\r\n    render(arr);\r\n}\r\n\r\nconst clearCompleted = function(arr) {\r\n    arr=items;\r\n    for(let i=arr.length - 1; i >= 0; i--){\r\n        if(arr[i].isDone) {\r\n            arr.splice(i, 1)\r\n        }\r\n    }\r\n\r\n    saveToLocalStorage();\r\n    render(arr);\r\n}\r\n\r\n"],"names":[],"version":3,"file":"index.62406edb.js.map","sourceRoot":"/__parcel_source_root/"}